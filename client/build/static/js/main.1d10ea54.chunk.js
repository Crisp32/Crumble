(this["webpackJsonpcrumble-client"]=this["webpackJsonpcrumble-client"]||[]).push([[0],{38:function(e,t,i){e.exports=i(77)},43:function(e,t,i){},74:function(e,t){},77:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),r=i(36),s=i.n(r),o=i(1),c=i(2),l=i(5),u=i(4),h=(i(43),i(3)),d=i.n(h),m=!1;function f(e){m=e}function p(e){d()(".content-wrapper").hide(),d()("#".concat(e)).css("display","block")}function v(e){var t=d()("#client-msg");t.css("display","block"),t.text(e.toUpperCase()),setTimeout((function(){t.hide()}),110*e.length)}function E(){var e,t=null===(e=d()("#name-input").val())||void 0===e?void 0:e.toString().trim();m||(t.length>oe?v("Player Name Must be Under ".concat(oe," Characters")):0===t.length?v("Player Name Must be Greater than 0 Characters"):d.a.ajax({type:"POST",url:"/api/find-lobby",dataType:"json",success:function(e){var i,n;null!=e.lobby?(i=t,n=e.lobby,(I=V()("ws://".concat(window.location.hostname,"/lobbies/").concat(n),{onlyBinaryUpgrades:!0,transports:["websocket"],upgrade:!1})).on(Z.CONNECTED,(function(){console.log("Connected to Lobby: ".concat(n)),I.emit(Z.REGISTER,i)})),I.on(Z.DISCONNECT,(function(){var e;clearInterval(F),document.removeEventListener("mousemove",A),e="Lost Connection to Server",m?(d()("#player-waiting").text(e.toUpperCase()),d()("#player-waiting").css("color",Ee)):(d()("#leave-game").hide(),d()("#winner-txt").css("color",Ee),d()("#winner-txt").text(e.toUpperCase()),d()("#win-screen-container").css("display","block"))})),I.on(Z.RECV_ID,(function(e){j=e})),I.on(Z.START_GAME,(function(e){if(e.start){var t;f(!1),d()("#name-choose-menu").css("display","none"),d()("#match-wait-menu").css("display","none"),y.initLayers();var i=e.players;for(var n in i){var a=i[n];G[n]=new Y(a.name,new $(a.pos.x,a.pos.y),n)}null===(t=e.level)||void 0===t||t.chunks.forEach((function(e){var t=new $(e.x,e.y);W.push(new X(t))})),W=function(e){var t=[];return e.forEach((function(i){var n=!0;for(var a in e){var r=e[a];if(r.chunkPos.y===i.chunkPos.y+1&&r.chunkPos.x===i.chunkPos.x){n=!1;break}}n&&(i.chunkEdge=new J(i.chunkPos)),t.push(i)})),t}(W),function(){var e,t,i={},n={};document.addEventListener("keydown",(function(e){i[e.key]=!0})),document.addEventListener("keyup",(function(e){i[e.key]=!1})),document.addEventListener("mousedown",(function(e){n[e.button]=!0})),document.addEventListener("mouseup",(function(e){n[e.button]=!1}));var a=!0;A=function(){var i,n,a=B.convertToCameraSpace(G[j].pos);i=k.y<a.y-Ne?ae.UP:k.y>a.y+Ne?ae.DOWN:ae.MIDDLE,n=k.x<a.x?ie.LEFT:ie.RIGHT,i===e&&n===t||I.emit(ee.ANGLE_CHANGE,{angle:i,direction:n}),e=i,t=n},document.addEventListener("mousemove",A),F=setInterval((function(){i.w?(I.emit(ee.PLAYER_MOVE,ne.UP),G[I.id].calcCurrentChunk()):i.s&&(I.emit(ee.PLAYER_MOVE,ne.DOWN),G[I.id].calcCurrentChunk()),i.a?(I.emit(ee.PLAYER_MOVE,ne.LEFT),G[I.id].calcCurrentChunk()):i.d&&(I.emit(ee.PLAYER_MOVE,ne.RIGHT),G[I.id].calcCurrentChunk()),n[0]&&a&&(a=!1,I.emit(ee.ROCKET_SHOT),setTimeout((function(){a=!0}),Re))}),Se)}(),clearInterval(Me),re=new w.a(x),d()("canvas").css("display","block"),d()("#leave-game").css("display","block"),d()("html").css("background-image","none")}else d()("#name-choose-menu").css("display","none"),d()("#match-wait-menu").css("display","block")})),I.on(Z.PLAYER_LEAVE,(function(e){console.log('Player of Socket ID "'.concat(e,'" has Left')),G[e].destroy()})),I.on(ee.PLAYER_MOVE,(function(e){G[e.socketId].serverPos=new $(e.pos.x,e.pos.y)})),I.on(ee.PLAYER_DIED,(function(e){G[j].socketId===e.socketId&&(clearInterval(F),document.removeEventListener("mousemove",A)),G[e.socketId].onDeath(e.fellOffFront)})),I.on(ee.ROCKET_SHOT,(function(e){K[e.instanceId]=new H(e.pos,e.direction),G[e.ownerSocketId].createMuzzleBlast()})),I.on(ee.ROCKET_EXPLODE,(function(e){K[e].explode()})),I.on(ee.TILE_DESTROYED,(function(e){var t=0;for(var i in e.instant||(t=Te),W){var n=W[i];for(var a in n.tiles){var r=n.tiles[a];if(r.tilePos.x===e.pos.x&&r.tilePos.y===e.pos.y){W[i].tiles[a].destroy(t);break}}}})),I.on(ee.PLAYER_WON,(function(e){clearInterval(F),document.removeEventListener("mousemove",A),setTimeout((function(){!function(e,t){t?d()("#winner-txt").css("color",ve):d()("#winner-txt").css("color",Ee),d()("#leave-game").hide(),d()("#winner-txt").text("< ".concat(e.toUpperCase()," WINS >")),d()("#win-screen-container").css("display","block")}(G[e].name,j===e)}),1e3)})),I.on(ee.ANGLE_CHANGE,(function(e){G[e.socketId].setHandrocketAngle(e.angle),G[e.socketId].direction=e.direction})),f(!0)):v("Maximum Amount of Active Games Reached")},error:function(e){v("500: Internal Server Error")}}))}var y=function(){function e(){Object(o.a)(this,e),this.renderLayer=0,this.invisible=!1}return Object(c.a)(e,[{key:"setRenderLayer",value:function(t){var i=this;e.layers[this.renderLayer.toString()].forEach((function(t,n){t===i&&delete e.layers[i.renderLayer.toString()][n]})),this.renderLayer=t,e.layers[this.renderLayer.toString()].push(this)}}],[{key:"initLayers",value:function(){for(var t=we;t<Oe;t++)e.layers[t.toString()]=[]}},{key:"remove",value:function(t){for(var i in e.layers)for(var n in e.layers[i])e.layers[i][n]===t&&delete e.layers[i][n]}},{key:"renderAllControllers",value:function(){for(var t in e.layers){e.layers[t].forEach((function(e){e.invisible||e.render()}))}}}]),e}();y.layers={};var k,b=i(11),w=i.n(b),O={HANDROCKET_SPRITESHEET:[],PLAYER_SPRITESHEET:[],PLAYER_FALL_SPRITESHEET:[],PLAYER_SHADOW:new w.a.Image};function g(e,t,i,n){for(var a=[],r=0;r<t*n;r+=t){var s=e.get(r,0,t,i);a.push(s)}return a}function x(e){var t,i,n;e.preload=function(){k=$.zero,t=e.loadImage(se+"player.png"),i=e.loadImage(se+"player_fall.png"),n=e.loadImage(se+"handrocket.png"),O.PLAYER_SHADOW=e.loadImage(se+"shadow.png")},e.setup=function(){O.PLAYER_SPRITESHEET=g(t,Ie.width,Ie.height,Ie.frames),O.PLAYER_FALL_SPRITESHEET=g(i,Ae.width,Ae.height,Ae.frames),O.HANDROCKET_SPRITESHEET=g(n,je.width,je.height,je.frames);var a=e.createCanvas(e.windowWidth,e.windowHeight,e.P2D).elt.getContext("2d");a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,e.frameRate(60),e.disableFriendlyErrors=!0},e.draw=function(){e.clear(),e.background(ce),B.update(),y.renderAllControllers(),k=new $(e.mouseX,e.mouseY)},e.windowResized=function(){e.resizeCanvas(e.windowWidth,e.windowHeight)}}var L=i(8),P=i.n(L),C=i(12),S=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this)).pos=void 0,n.direction=void 0,n.angle=void 0,n.spriteFrame=void 0,n.pos=e,n.direction=ie.LEFT,n.angle=ae.MIDDLE,n.spriteFrame=0,n.setRenderLayer(6),n}return Object(c.a)(i,[{key:"setAngle",value:function(e){switch(this.angle=e,this.angle){case ae.UP:this.spriteFrame=2;break;case ae.MIDDLE:this.spriteFrame=0;break;case ae.DOWN:this.spriteFrame=1}}},{key:"render",value:function(){var e,t,i=B.convertToCameraSpace(this.pos);switch(re.push(),this.direction){case ie.LEFT:re.translate(i.x-B.pos.x+(re.windowWidth/2-5)+this.pos.x+je.width,0),re.scale(-1,1),e=32;break;case ie.RIGHT:re.scale(1,1),e=29}switch(this.spriteFrame){case 1:t=5;break;case 2:t=-15;break;default:t=0}re.imageMode(re.CENTER),re.image(O.HANDROCKET_SPRITESHEET[this.spriteFrame],i.x+e,i.y+t,je.width*je.scale,je.height*je.scale),re.pop()}}]),i}(y),T=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this)).pos=void 0,n.pos=e,n.setRenderLayer(4),n}return Object(c.a)(i,[{key:"render",value:function(){var e=B.convertToCameraSpace(this.pos);re.tint(255,80),re.imageMode(re.CENTER),re.image(O.PLAYER_SHADOW,e.x,e.y,6*Ie.scale*.9,4*Ie.scale*.9),re.tint(255,255)}}]),i}(y),R=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e,n,a){var r;return Object(o.a)(this,i),(r=t.call(this)).text=void 0,r.colour=void 0,r.pos=void 0,r.text=e,r.colour=n,r.pos=a,r.setRenderLayer(9),r}return Object(c.a)(i,[{key:"render",value:function(){var e=B.convertToCameraSpace(this.pos);re.fill(this.colour),re.textFont("Crumble"),re.textAlign(re.CENTER,re.CENTER),re.textSize(25),re.text(this.text,e.x,e.y)}}]),i}(y);function N(e){return Fe(-300,300)*(e/1e4)}var I,A,j,F,z=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this)).tilePos=void 0,n.particles=[],n.particleCount=8,n.minParticleSize=9,n.maxParticleSize=12,n.minLifetime=30,n.maxLifetime=50,n.baseSpeed=140,n.tilePos=e,n.setRenderLayer(4),n.initParticles(),n}return Object(c.a)(i,[{key:"initParticles",value:function(){for(var e=0;e<this.particleCount;e++)this.particles.push({pos:this.tilePos,size:Fe(this.minParticleSize,this.maxParticleSize),maxLifetimeFrames:Fe(this.minLifetime,this.maxLifetime),lifetimeFrames:0,direction:{rise:N(this.baseSpeed),run:N(this.baseSpeed)}})}},{key:"render",value:function(){var e=this,t=B.convertToCameraSpace(new $(this.tilePos.x*xe-1.5*xe,this.tilePos.y*xe-1.5*xe));this.particles.forEach((function(i){re.noStroke(),re.fill(de),re.rectMode(re.CENTER),re.rect(t.x+i.pos.x+.4*i.direction.run,t.y+i.pos.y+.4*i.direction.rise,i.size,i.size),i.lifetimeFrames>=i.maxLifetimeFrames?e.particles=e.particles.filter((function(e){return e!==i})):i.lifetimeFrames>=i.maxLifetimeFrames-i.size&&i.size--,i.pos=new $(i.pos.x+i.direction.run,i.pos.y+i.direction.rise),i.lifetimeFrames++})),0===this.particles.length&&y.remove(this)}}]),i}(y),M=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this)).pos=void 0,n.particles=[],n.particleCount=9,n.minParticleSize=8,n.maxParticleSize=11,n.baseSpeed=60,n.pos=e,n.setRenderLayer(7),n.initParticles(),n}return Object(c.a)(i,[{key:"initParticles",value:function(){for(var e=0;e<this.particleCount;e++)this.particles.push({pos:this.pos,size:Fe(this.minParticleSize,this.maxParticleSize),maxLifetimeFrames:Fe(20,35),lifetimeFrames:0,direction:{rise:N(this.baseSpeed),run:N(this.baseSpeed)}})}},{key:"render",value:function(){var e=this;this.particles.forEach((function(t){var i=B.convertToCameraSpace(t.pos);re.noStroke(),re.fill(me),re.rectMode(re.CENTER),re.rect(i.x+.4*t.direction.run,i.y+.4*t.direction.rise,t.size,t.size),t.lifetimeFrames>=t.maxLifetimeFrames&&e.particles.length>0?e.particles=e.particles.filter((function(e){return e!==t})):t.lifetimeFrames>=t.maxLifetimeFrames-t.size?t.size--:0===e.particles.length&&y.remove(e),t.pos=new $(t.pos.x+t.direction.run,t.pos.y+t.direction.rise),t.lifetimeFrames++}))}}]),i}(y),D=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this)).pos=void 0,n.stopParticles=void 0,n.particles=[],n.particleCount=8,n.minParticleSize=8,n.maxParticleSize=11,n.minLifetime=10,n.maxLifetime=65,n.baseSpeed=30,n.pos=e,n.stopParticles=!1,n.setRenderLayer(6),n.initParticles(),n}return Object(c.a)(i,[{key:"initParticles",value:function(){for(var e=0;e<this.particleCount;e++)this.particles.push({pos:this.pos,size:Fe(this.minParticleSize,this.maxParticleSize),maxLifetimeFrames:Fe(this.minLifetime,this.maxLifetime),lifetimeFrames:0,direction:{rise:N(this.baseSpeed),run:N(this.baseSpeed)}})}},{key:"render",value:function(){var e=this;this.particles.forEach((function(t){var i=B.convertToCameraSpace(t.pos);re.noStroke(),re.fill(fe),re.rectMode(re.CENTER),re.rect(i.x,i.y,t.size,t.size),t.lifetimeFrames>=t.maxLifetimeFrames?e.stopParticles?e.particles.length>0&&(e.particles=e.particles.filter((function(e){return e!==t}))):(t.pos=e.pos,t.size=Fe(e.minParticleSize,e.maxParticleSize),t.maxLifetimeFrames=Fe(e.minLifetime,e.maxLifetime),t.lifetimeFrames=0,t.direction={rise:N(e.baseSpeed),run:N(e.baseSpeed)}):t.lifetimeFrames>=t.maxLifetimeFrames-t.size&&t.size--,t.pos=new $(t.pos.x+t.direction.run,t.pos.y+t.direction.rise),t.lifetimeFrames++})),0===this.particles.length&&y.remove(this)}}]),i}(y),_=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this)).pos=void 0,n.particles=[],n.particleCount=6,n.minParticleSize=10,n.maxParticleSize=12,n.minLifetime=20,n.maxLifetime=35,n.baseSpeed=95,n.pos=e,n.setRenderLayer(7),n.initParticles(),n}return Object(c.a)(i,[{key:"initParticles",value:function(){for(var e=0;e<this.particleCount;e++)this.particles.push({pos:this.pos,size:Fe(this.minParticleSize,this.maxParticleSize),maxLifetimeFrames:Fe(this.minLifetime,this.maxLifetime),lifetimeFrames:0,direction:{rise:N(this.baseSpeed),run:N(this.baseSpeed)}})}},{key:"render",value:function(){var e=this;this.particles.forEach((function(t){var i=B.convertToCameraSpace(t.pos);re.noStroke(),re.fill(pe),re.rectMode(re.CENTER),re.rect(i.x,i.y,t.size,t.size),t.lifetimeFrames>=t.maxLifetimeFrames?e.particles.length>0&&(e.particles=e.particles.filter((function(e){return e!==t}))):t.lifetimeFrames>=t.maxLifetimeFrames-t.size&&t.size--,t.pos=new $(t.pos.x+t.direction.run,t.pos.y+t.direction.rise),t.lifetimeFrames++})),0===this.particles.length&&y.remove(this)}}]),i}(y),Y=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e,n,a){var r;Object(o.a)(this,i),(r=t.call(this)).name=void 0,r.pos=void 0,r.direction=void 0,r.serverPos=void 0,r.socketId=void 0,r.currentChunk=void 0,r.dead=void 0,r.handrocket=void 0,r.shadow=void 0,r.nametag=void 0,r.speed=void 0,r.calculatingSpeed=void 0,r.state=void 0,r.frame=void 0,r.handrocketVertOffset=void 0,r.fallAcceleration=1.2,r.fallVelocity=14,r.fallTerminalVelocity=50,r.name=e,r.pos=n,r.serverPos=n,r.socketId=a,r.direction=ie.LEFT,r.currentChunk=$.zero,r.calculatingSpeed=!1,r.speed=$.zero,r.state=te.IDLE,r.frame=0,r.dead=!1,r.handrocketVertOffset=je.vertOffsetNormal;var s=Ee;return j===r.socketId&&(s=ve),r.handrocket=new S(r.pos),r.shadow=new T(r.pos),r.nametag=new R(r.name,s,r.pos),r.calcCurrentChunk(),r.setRenderLayer(5),r}return Object(c.a)(i,[{key:"destroy",value:function(){y.remove(this.handrocket),y.remove(this.shadow),y.remove(this.nametag),y.remove(this)}},{key:"setHandrocketAngle",value:function(e){this.handrocket.setAngle(e)}},{key:"calcCurrentChunk",value:function(){this.currentChunk=new $(Math.round(this.pos.x/Pe),Math.round(this.pos.y/Pe))}},{key:"updateSpeed",value:function(){var e=Object(C.a)(P.a.mark((function e(){var t,i=this;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.calculatingSpeed=!0,t=new $(this.pos.x,this.pos.y),.55,setTimeout((function(){i.speed=new $(Math.abs(t.x-i.pos.x),Math.abs(t.y-i.pos.y)),i.calculatingSpeed=!1}),150),this.speed.x>.55||this.speed.y>.55?this.state=te.RUN:this.state=te.IDLE;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onDeath",value:function(e){var t=this,i=1;this.dead=!0,this.frame=0,this.handrocket.invisible=!0,this.shadow.invisible=!0,this.nametag.invisible=!0,e&&(i=5),this.setRenderLayer(i);var n=B.convertToCameraSpace(this.pos),a=setInterval((function(){n.y>=610&&clearInterval(a),t.fallVelocity<t.fallTerminalVelocity&&(t.fallVelocity+=t.fallAcceleration),t.serverPos=new $(t.pos.x,t.pos.y+t.fallVelocity)}),15)}},{key:"createMuzzleBlast",value:function(){var e=-1;this.direction===ie.RIGHT&&(e=1);var t=$.zero;switch(this.handrocket.angle){case ae.UP:t=new $(30*e,-15);break;case ae.MIDDLE:t=new $(50*e,-10);break;case ae.DOWN:t=new $(35*e,12)}new M(new $(this.handrocket.pos.x+t.x,this.handrocket.pos.y+t.y))}},{key:"renderPlayerSprite",value:function(e,t,i,n){switch(re.push(),this.direction){case ie.LEFT:re.scale(1,1);break;case ie.RIGHT:re.translate(t.x-B.pos.x+re.windowWidth/2+this.pos.x,0),re.scale(-1,1)}re.imageMode(re.CENTER),re.image(e,t.x,t.y,i,n),re.pop()}},{key:"render",value:function(){this.pos=$.lerp(this.pos,this.serverPos,.12);var e=B.convertToCameraSpace(this.pos);this.calculatingSpeed||this.updateSpeed();if(this.dead)this.state=te.IDLE,re.frameCount%10===0&&(this.frame++,this.frame>Ae.frames-1&&(this.frame=0)),this.renderPlayerSprite(O.PLAYER_FALL_SPRITESHEET[this.frame],e,Ae.width*Ie.scale,Ae.height*Ie.scale);else{switch(this.speed.x>.4||this.speed.y>.4?this.state=te.RUN:this.state=te.IDLE,this.state){case te.IDLE:re.frameCount%20===0&&(this.frame++,this.frame>1?(this.frame=0,this.handrocketVertOffset=je.vertOffsetNormal):this.handrocketVertOffset=je.vertOffsetDown);break;case te.RUN:this.frame<2&&(this.frame=1),re.frameCount%9===0&&(this.frame>=Ie.frames-1?(this.frame=1,this.handrocketVertOffset=je.vertOffsetNormal):2===this.frame||4===this.frame||6===this.frame?this.handrocketVertOffset=je.vertOffsetUp:this.handrocketVertOffset=je.vertOffsetNormal,this.frame++)}this.renderPlayerSprite(O.PLAYER_SPRITESHEET[this.frame],e,Ie.width*Ie.scale,Ie.height*Ie.scale)}this.handrocket.pos=new $(this.pos.x,this.pos.y+this.handrocketVertOffset),this.handrocket.direction=this.direction,this.shadow.pos=new $(this.pos.x,this.pos.y+ye),this.nametag.pos=new $(this.pos.x,this.pos.y-ke)}}]),i}(y),H=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e,n){var a;return Object(o.a)(this,i),(a=t.call(this)).pos=void 0,a.direction=void 0,a.trailParticles=void 0,a.pos=e,a.direction=n,a.trailParticles=new D(a.pos),a.setRenderLayer(7),a}return Object(c.a)(i,[{key:"explode",value:function(){this.trailParticles.stopParticles=!0,new _(this.pos),B.shake(3,7),y.remove(this)}},{key:"render",value:function(){this.pos=new $(this.pos.x+be*this.direction.x,this.pos.y+be*this.direction.y*.75),this.trailParticles.pos=this.pos;var e=B.convertToCameraSpace(this.pos);re.noStroke(),re.fill(pe),re.rectMode(re.CENTER),re.rect(e.x,e.y,13,13)}}]),i}(y),U=i(37),V=i.n(U),W=[],G={},K={};var B=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"convertToCameraSpace",value:function(e){return new $(re.windowWidth/2+e.x-this.pos.x,re.windowHeight/2+e.y-this.pos.y)}},{key:"update",value:function(){if(!G[j].dead){var t=$.lerp(e.pos,new $(G[j].currentChunk.x*Pe,G[j].currentChunk.y*Pe),.1);e.pos=t}if(e.shakeTimer>=0){var i=new $(Fe(-5,5)*e.shakePower,Fe(-5,5)*this.shakePower);e.pos=new $(e.pos.x+i.x,e.pos.y+i.y),this.shakeTimer--}}},{key:"shake",value:function(t,i){e.shakePower=t,e.shakeTimer=i}}]),e}();B.pos=void 0,B.shakePower=0,B.shakeTimer=0;var q=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this)).tilePos=void 0,n.fadeColour=void 0,n.renderColour=void 0,n.tilePos=e,n.renderColour=le,n.fadeColour=n.renderColour,n.setRenderLayer(3),n}return Object(c.a)(i,[{key:"destroy",value:function(){var e=Object(C.a)(P.a.mark((function e(t){var i,n,a=this;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t>0&&(n=!1,i=setInterval((function(){a.fadeColour=n?ue:le,n=!n}),250)),setTimeout((function(){clearInterval(i),a.invisible=!0,new z(a.tilePos),B.shake(3.5,9)}),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=B.convertToCameraSpace(new $(this.tilePos.x*xe-1.5*xe,this.tilePos.y*xe-1.5*xe));this.renderColour=Q.lerp(this.renderColour,this.fadeColour,1.8),re.noStroke(),re.fill(re.color(this.renderColour.r,this.renderColour.g,this.renderColour.b)),re.rectMode(re.CENTER),re.rect(e.x,e.y,xe+Ce,xe+Ce)}}]),i}(y),X=function(){function e(t){Object(o.a)(this,e),this.chunkPos=void 0,this.tiles=void 0,this.chunkEdge=void 0,this.chunkPos=t,this.tiles=[],this.chunkEdge=void 0,this.initTiles()}return Object(c.a)(e,[{key:"initTiles",value:function(){for(var e=0;e<Le;e++)for(var t=0;t<Le;t++){var i=new $(t+this.chunkPos.x*Le,e+this.chunkPos.y*Le);this.tiles.push(new q(i))}}}]),e}(),J=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this)).chunkPos=void 0,n.particles=[],n.particleCount=5,n.chunkPos=e,n.setRenderLayer(2),n.initParticles(),n}return Object(c.a)(i,[{key:"initParticles",value:function(){for(var e=0;e<this.particleCount;e++){var t=Fe(8,12),i=new $(Fe(0,Pe+Ce)+6,Fe(0,ge)+t+10.8),n=Fe(-1,1);0===n&&(n=1),this.particles.push({pos:i,size:t,speed:.015*Fe(1,6),direction:n})}}},{key:"render",value:function(){var e=B.convertToCameraSpace(new $(this.chunkPos.x*Pe,this.chunkPos.y*Pe+Pe/2+ge/2));re.noStroke(),re.fill(he),re.rectMode(re.CENTER),re.rect(e.x,e.y,Pe+Ce,ge),this.particles.forEach((function(t){t.pos=new $(t.pos.x,t.pos.y+re.sin(.03*re.frameCount)*t.speed*t.direction);var i=new $(e.x+t.pos.x-Pe/2,e.y+t.pos.y);re.noStroke(),re.fill(he),re.rectMode(re.CENTER),re.rect(i.x,i.y,t.size,t.size)}))}}]),i}(y),Q=function(){function e(t,i,n){Object(o.a)(this,e),this.r=void 0,this.g=void 0,this.b=void 0,this.r=t,this.g=i,this.b=n}return Object(c.a)(e,null,[{key:"lerp",value:function(t,i,n){function a(e,t){return(1-n)*e+n*t}return n/=10,new e(Math.floor(a(t.r,i.r)),Math.floor(a(t.g,i.g)),Math.floor(a(t.b,i.b)))}}]),e}(),$=function(){function e(t,i){Object(o.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=i}return Object(c.a)(e,null,[{key:"lerp",value:function(t,i,n){return new e((1-n)*t.x+n*i.x,(1-n)*t.y+n*i.y)}}]),e}();$.zero=new $(0,0);var Z,ee,te,ie,ne,ae,re,se="/graphics/",oe=16,ce="#181425",le=new Q(192,203,220),ue=new Q(162,38,51),he="#8b9bb4",de="#5a6988",me="#feae34",fe="#ffffff",pe="#ff0044",ve="#1fad48",Ee="#e43b44",ye=32,ke=53,be=4.7,we=0,Oe=10,ge=45,xe=60,Le=4,Pe=xe*Le,Ce=2,Se=100,Te=2e3,Re=600,Ne=35,Ie={scale:7.5,width:5,height:9,frames:8},Ae={width:9,height:6,frames:3},je={scale:6,width:11,height:8,frames:3,vertOffsetUp:-1,vertOffsetDown:14,vertOffsetNormal:8};function Fe(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}!function(e){e.CONNECTED="connect",e.DISCONNECT="disconnect",e.REGISTER="register",e.PLAYER_LEAVE="leave",e.START_GAME="startgame",e.RECV_ID="id"}(Z||(Z={})),function(e){e.PLAYER_MOVE="playermove",e.PLAYER_DIED="playerdied",e.PLAYER_WON="playerwon",e.TILE_DESTROYED="tiledestroyed",e.ANGLE_CHANGE="anglechange",e.ROCKET_SHOT="rocketshot",e.ROCKET_EXPLODE="rocketexplode"}(ee||(ee={})),function(e){e.IDLE="idle",e.RUN="run"}(te||(te={})),function(e){e.LEFT="left",e.RIGHT="right"}(ie||(ie={})),function(e){e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right"}(ne||(ne={})),function(e){e.UP="up",e.MIDDLE="middle",e.DOWN="down"}(ae||(ae={})),B.pos=$.zero;var ze=0,Me=setInterval((function(){d()("html").css("background-position-y","".concat(ze,"px")),ze+=.1}),1);var De=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(){return Object(o.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement("div",{id:"win-screen-container",style:{display:"none"}},n.createElement("div",{id:"winner-txt"}),n.createElement("button",{id:"exit-win-screen-btn",onClick:function(){return window.location.reload()}},"BACK TO HOME")),n.createElement("div",{id:"content-wrapper-container"},n.createElement("div",{className:"content-wrapper",id:"name-choose-menu",style:{display:"block"}},n.createElement("div",{className:"title-txt"},"< CRUMBLE >"),n.createElement("div",{className:"hlink",onClick:function(){p("how-to-play-info")}},"HOW TO PLAY"),n.createElement("div",{className:"hlink",onClick:function(){p("controls-info")}},"CONTROLS"),n.createElement("br",null),n.createElement("div",{id:"client-msg",style:{display:"none"}}),n.createElement("input",{className:"standard-input",id:"name-input",spellCheck:"false",placeholder:"TYPE YOUR PLAYER NAME HERE"}),n.createElement("br",null),n.createElement("button",{className:"standard-btn",id:"name-conf",onClick:function(){return E()}},"ENTER QUEUE")),n.createElement("div",{className:"content-wrapper",id:"how-to-play-info",style:{display:"none"}},n.createElement("div",{className:"title-txt"},"< HOW TO PLAY >"),n.createElement("div",{id:"how-to-play-content"},n.createElement("div",{className:"info-txt"},"The goal of Crumble is to be the final player standing. Parts of the level around you will crumble periodically indicated by a flashing red square."),n.createElement("br",null),n.createElement("img",{className:"tut-img",src:"/tutorial/tile_crumble.png",alt:"Tile Crumbling"}),n.createElement("br",null),n.createElement("div",{className:"info-txt"},"Players have the ability to fire rocket projectiles at certain angles. Upon impact, a rocket will knock them back as well as cause nearby tiles to instantly be destroyed. If a rocket hits a player, it will deal knockback as well destroy nearby tiles."),n.createElement("img",{className:"tut-img",src:"/tutorial/rocket_projectile.png",alt:"Moving Rocket Projectile"}),n.createElement("br",null),n.createElement("div",{className:"info-txt"},"In terms of elimination. You can die by either falling through a crumbled tile or by falling off the edge of the map."),n.createElement("img",{className:"tut-img",src:"/tutorial/falling_player.png",alt:"Falling Player"}),n.createElement("br",null)),n.createElement("button",{className:"standard-btn",id:"cancel-queue",onClick:function(){p("name-choose-menu")}},"BACK")),n.createElement("div",{className:"content-wrapper",id:"controls-info",style:{display:"none"}},n.createElement("div",{className:"title-txt"},"< CONTROLS >"),n.createElement("div",{className:"info-txt"},n.createElement("div",{className:"key-icon"},"W")," MOVES YOUR PLAYER UP"),n.createElement("div",{className:"info-txt"},n.createElement("div",{className:"key-icon"},"A")," MOVES YOUR PLAYER LEFT"),n.createElement("div",{className:"info-txt"},n.createElement("div",{className:"key-icon"},"S")," MOVES YOUR PLAYER DOWN"),n.createElement("div",{className:"info-txt"},n.createElement("div",{className:"key-icon"},"D")," MOVES YOUR PLAYER RIGHT"),n.createElement("br",null),n.createElement("div",{className:"info-txt"},n.createElement("div",{className:"key-icon"},"LEFT CLICK")," SHOOTS A ROCKET"),n.createElement("div",{className:"info-txt"},n.createElement("div",{className:"key-icon"},"MOVE MOUSE")," POINTS YOUR WEAPON"),n.createElement("button",{className:"standard-btn",id:"cancel-queue",onClick:function(){p("name-choose-menu")}},"BACK")),n.createElement("div",{className:"content-wrapper",id:"match-wait-menu",style:{display:"none"}},n.createElement("div",{className:"title-txt"},"< CRUMBLE >"),n.createElement("div",{className:"subtitle-txt",id:"player-waiting"},"WAITING FOR PLAYER(S)..."),n.createElement("button",{className:"standard-btn",id:"cancel-queue",onClick:function(){return window.location.reload()}},"CANCEL QUEUE"))),n.createElement("div",{id:"dev-name"},"\xa9 CONNELL REFFO"),n.createElement("button",{id:"leave-game",style:{display:"none"},onClick:function(){return window.location.reload()}},"LEAVE GAME"))}}]),i}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.1d10ea54.chunk.js.map